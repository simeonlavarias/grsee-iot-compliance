<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GRSee - Events</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>GRSee â€“ Event Logs</h1>
      <p>Mock data (software-only mode). Hardware integration comes later.</p>
      <p>
        <a href="/dashboard">Dashboard</a> |
        <a href="/violations">Violations</a>
      </p>
    </header>

    <table>
      <thead>
        <tr>
          <th class="col-time">Time</th>
          <th class="col-device">Device</th>
          <th class="col-zone">Zone</th>
          <th class="col-event">Event</th>
          <th class="col-severity">Severity</th>
          <th class="col-status">Status</th>
          <th class="col-summary">Summary</th>
          <th>Details</th>
        </tr>
      </thead>

      <tbody>
        {% for e in events %}
        <tr>
          <td class="col-time">{{ e.timestamp }}</td>
          <td class="col-device">{{ e.device_type }}</td>
          <td class="col-zone">{{ e.zone }}</td>

          <!-- Event type (truncate to prevent overflow) -->
          <td class="col-event truncate" title="{{ e.event_type }}">{{ e.event_type }}</td>

          <!-- Severity -->
          <td class="col-severity sev sev-{{ e.severity|lower }}">
            {{ e.severity }}
          </td>

          <!-- Compliance Status -->
          <td class="col-status">
            {% if e.compliance_status == "VIOLATION" %}
              <span class="sev sev-high">VIOLATION</span>
            {% else %}
              <span class="sev sev-low">COMPLIANT</span>
            {% endif %}
          </td>

          <!-- Summary (truncate + tooltip for full text) -->
          <td class="col-summary truncate" title="{{ e.summary }}">{{ e.summary }}</td>

          <!-- Details link -->
          <td>
            <a href="/event/{{ e.event_id }}">View</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <footer class="footer">
      <a href="/dashboard">Back to Dashboard</a>
    </footer>
  </div>
</body>
</html>
